FROM    debian@sha256:903779f30a7ee46937bfb21406f125d5fdace4178074e1cc71c49039ebf7f48f
RUN     apt-get update && \
        apt-get install -y build-essential \
                           pkg-config \
                           libc6-dev \
                           m4 \
                           g++-multilib \
                           autoconf \
                           libtool \
                           ncurses-dev \
                           unzip \
                           git \
                           python3 \
                           python3-pip \
                           zlib1g-dev \
                           wget \
                           curl \
                           bsdmainutils \
                           automake && \
rm -rf /var/lib/apt/lists/* && \
pip3 install pyblake2 pyzmq pyutil python-qpid-proton simplejson && \
git clone https://github.com/zcash/zcash.git && cd ./zcash && \
./zcutil/fetch-params.sh --testnet && \
./zcutil/build.sh -j$(nproc) && \
mkdir /root/.zcash/ && touch /root/.zcash/zcash.conf && \
ln -sf /usr/bin/python3 /usr/bin/python && \
ln -sf /usr/bin/pip3 /usr/bin/pip
